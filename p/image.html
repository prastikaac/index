<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Swipe Image Gallery</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            text-align: center;
        }

        /* Responsive gallery grid */
        .images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            padding: 15px;
            max-width: 1200px;
            margin: auto;
        }

        /* Frame for each image */
        .frame {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            cursor: pointer;
            aspect-ratio: 4/3;
            /* keeps proportion across screens */
        }

        .frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            display: block;
        }

        /* Overlay circle */
        .overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 0;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            transform: translate(50%, 50%);
            transition: width 0.6s ease, height 0.6s ease;
            z-index: 1;
            pointer-events: none;
        }

        /* Centered text */
        .frame .text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, 30px);
            color: white;
            font-size: 1rem;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
            z-index: 2;
            pointer-events: none;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        /* Hover effects */
        .frame:hover .text {
            opacity: 1;
            transform: translate(-50%, -50%);
        }

        .frame:hover img {
            transform: scale(1.1);
        }

        .frame:hover .overlay {
            width: 300%;
            height: 300%;
        }

        #image-viewer {
            display: none;
            /* hidden on page load */
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            align-items: center;
            justify-content: center;
            padding: 0 10px;
            box-sizing: border-box;
        }


        /* Enlarged image */
        #image-viewer .modal-content {
            max-width: 100%;
            max-height: 90vh;
            /* keep space at top/bottom */
            object-fit: contain;
            margin: auto;
            display: block;
        }


        .slide-left {
            transform: translateX(-100%);
            opacity: 0;
        }

        .slide-right {
            transform: translateX(100%);
            opacity: 0;
        }

        #image-viewer .close {
            position: absolute;
            top: 15px;
            right: 25px;
            color: #fff;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            z-index: 2;
        }

        /* Thumbnail bar */
        .thumbnail-bar {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.9);
            padding: 8px 5px;
            display: flex;
            justify-content: center;
            gap: 10px;
            overflow-x: auto;
            z-index: 2000;
        }

        .thumbnail-bar img {
            width: 70px;
            height: 55px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 5px;
            flex-shrink: 0;
        }




        .thumbnail-bar img.active {
            border: 2px solid #fff;
        }

        .thumbnail-bar::-webkit-scrollbar {
            display: none;
        }

        /* Extra responsiveness */
        @media (max-width: 600px) {
            .frame .text {
                font-size: 0.9rem;
            }

            .thumbnail-bar img {
                width: 55px;
                height: 45px;
            }

            #image-viewer {
                padding: 0 10px;
                /* adds margin on both sides */
                box-sizing: border-box;
            }

            #image-viewer .modal-content {
                width: 100%;
                /* take full available width */
                height: auto;
                /* keep aspect ratio */
                max-width: 100%;
                max-height: 90vh;
                /* leave space top/bottom */
                margin: auto;
                /* center vertically */
                display: block;
            }
        }

        /* Enlarged image for PC */
        @media (min-width: 601px) {
            #image-viewer .modal-content {
                width: 100vw;
                /* full width of viewport */
                height: 90vh;
                /* full height of viewport */
                max-width: 100vw;
                max-height: 100vh;
                object-fit: contain;
                /* keeps image aspect ratio */
                margin: 0;
            }

            
        .thumbnail-bar img {
            width: 150px;
            height: 85px;
            margin-bottom: 10px;
            margin-top: 10px;
        }
        }
    </style>
</head>

<body>
    <!-- Gallery -->
    <div class="images">
        <div class="frame">
            <img src="https://www.w3schools.com/howto/img_fjords.jpg" alt="">
            <div class="overlay"></div>
            <div class="text">Fjords</div>
        </div>
        <div class="frame">
            <img src="https://www.w3schools.com/howto/img_lights.jpg" alt="">
            <div class="overlay"></div>
            <div class="text">Lights</div>
        </div>
        <div class="frame">
            <img src="https://www.w3schools.com/howto/img_mountains.jpg" alt="">
            <div class="overlay"></div>
            <div class="text">Mountains</div>
        </div>
        <div class="frame">
            <img src="https://www.w3schools.com/howto/img_nature.jpg" alt="">
            <div class="overlay"></div>
            <div class="text">Nature</div>
        </div>
    </div>

    <!-- Modal -->
    <div id="image-viewer">
        <span class="close">&times;</span>
        <img class="modal-content" id="full-image">
    </div>

    <!-- Thumbnails -->
    <div class="thumbnail-bar"></div>

    <script>
        let currentIndex = 0;
        const images = $(".frame img").map(function () {
            return $(this).attr("src");
        }).get();

        $(".frame img").click(function () {
            currentIndex = images.indexOf($(this).attr("src"));
            showImage();
            $("#image-viewer")
                .css("display", "flex")   // make it flex when visible
                .hide()
                .fadeIn(100);
            $(".thumbnail-bar").fadeIn(200);
        });

        // Close button
        $("#image-viewer .close").click(function () {
            closeViewer();
        });

        // âœ… Close if clicked outside the image
        $("#image-viewer").click(function (e) {
            if (!$(e.target).is("#full-image, .close")) {
                closeViewer();
            }
        });

        function closeViewer() {
            $('#image-viewer').fadeOut(100);
            $(".thumbnail-bar").fadeOut(200);
        }

        function showImage(direction) {
            const img = $("#full-image");
            if (direction) {
                img.addClass(direction === "left" ? "slide-left" : "slide-right");
                setTimeout(() => {
                    img.removeClass("slide-left slide-right");
                    img.attr("src", images[currentIndex]);
                    img.css("transform", direction === "left" ? "translateX(100%)" : "translateX(-100%)");
                    img[0].offsetHeight;
                    img.css({ transform: "translateX(0)", opacity: 1 });
                    renderThumbnails();
                }, 300);
            } else {
                img.attr("src", images[currentIndex]);
                img.css({ transform: "translateX(0)", opacity: 1 });
                renderThumbnails();
            }
        }

        $(document).keydown(function (e) {
            if ($("#image-viewer").is(":visible")) {
                if (e.key === "ArrowLeft") {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    showImage("right");
                } else if (e.key === "ArrowRight") {
                    currentIndex = (currentIndex + 1) % images.length;
                    showImage("left");
                } else if (e.key === "Escape") {
                    closeViewer();
                }
            }
        });

        let startX = 0;
        $("#image-viewer").on("touchstart", function (e) {
            startX = e.originalEvent.touches[0].clientX;
        });

        $("#image-viewer").on("touchend", function (e) {
            let endX = e.originalEvent.changedTouches[0].clientX;
            if (startX - endX > 50) {
                currentIndex = (currentIndex + 1) % images.length;
                showImage("left");
            } else if (endX - startX > 50) {
                currentIndex = (currentIndex - 1 + images.length) % images.length;
                showImage("right");
            }
        });

        function renderThumbnails() {
            const thumbContainer = $(".thumbnail-bar").empty();
            images.forEach((src, index) => {
                const thumb = $("<img>").attr("src", src);
                if (index === currentIndex) thumb.addClass("active");
                thumb.click(() => {
                    currentIndex = index;
                    showImage();
                });
                thumbContainer.append(thumb);
            });
        }
    </script>

</body>

</html>